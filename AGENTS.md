# Repository Guidelines

## Project Structure & Module Organization

- `src/` holds the TypeScript source for the CLI, split by domain:
  - `src/cli.ts`/`src/main.ts` wire up the CLI entrypoint.
  - `src/commands/` defines CLI commands (e.g., `detect`, `version`).
  - `src/analyzer/` contains detection logic and helpers.
  - `src/signatures/` contains technology signatures; `src/signatures/technologies/` uses `snake_case` filenames (e.g., `microsoft_iis.ts`).
  - `src/browser/` wraps browser automation utilities.
  - `src/logger/` centralizes logging utilities.
- `dist/` is the compiled output (generated by `npm run build`).
- Root config: `tsconfig.json`, `eslint.config.ts`, `package.json`.

## Build, Test, and Development Commands

- `npm install`: install dependencies.
- `npm run build`: compile TypeScript to `dist/`.
- `npm run dev`: run the compiled CLI with source maps (`dist/main.js`).
- `npm start`: build and run the CLI in one step.
- `npm run lint`: run ESLint on all `.ts` files.
- `npm run format`: format the repo with Prettier.
- `npm test`: run Vitest in CI mode (`vitest run`).

## Coding Style & Naming Conventions

- Language: TypeScript (ES modules; see `"type": "module"` in `package.json`).
- Formatting: Prettier is the source of truth; run `npm run format` before PRs.
- Linting: ESLint with `@eslint/js` + `typescript-eslint` recommendations.
- Naming: follow existing module names; keep signature files in `snake_case` under `src/signatures/technologies/`.

## Testing Guidelines

- Framework: Vitest (`npm test`).
- Current state: no test files are present yet.
- When adding tests, keep files close to the code they cover (e.g., `src/analyzer/*.test.ts`).

## Commit & Pull Request Guidelines

- Commits follow Conventional Commits style (e.g., `feat: add gsap signature`, `docs: update README`).
- PRs should include:
  - A short summary of changes and motivation.
  - Any relevant CLI output or reproduction steps.
  - Links to related issues if applicable.

## Development Notes

- The CLI binary is `whopper`, mapped to `dist/main.js` via `package.json`.
- For local CLI testing, consider `npm link` and then run `whopper detect <url>`.
